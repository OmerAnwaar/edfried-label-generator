import { Answer, Question, getAnswerCode } from './questions';
import { createReducer } from '../utility';

const defaultRootAnswers = [
  {"Name":"Weihnachten","Code":"W","Questions":[{"Frage":"Welches Werkstück?","DataField":"Was","Answers":[{"Name":"Baum","Code":"B","Questions":[{"QuestionText":"Welcher Baum?","DataField":"Art","Answers":["Nobilis","Nordmann"]},{"QuestionText":"Größe?","DataField":"Größe","Answers":["40 cm","50 cm","60 cm","70 cm","80 cm","90 cm","100 cm"]},{"QuestionText":"Welche Farbe?","DataField":"Farbe","Answers":["rot","gold","silber","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Mit Kerze?","DataField":"Kerze","Answers":["mit Kerze","ohne Kerze"]}]},{"Name":"Adventskranz","Code":"A","Questions":[{"QuestionText":"Welches Grün?","DataField":"Art","Answers":["Nobilis","Nordmann","Mix","ohne Grün"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["15 cm","20 cm","25 cm","30 cm","35 cm","40 cm","45 cm","50 cm","55 cm","60 cm","65 cm","75 cm","80 cm"]},{"QuestionText":"Welche Farbe?","DataField":"Farbe","Answers":["rot","gold","silber","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Mit Kerze?","DataField":"Kerze","Answers":["mit Kerze","ohne Kerze"]}]},{"Name":"Liegestrauß","Code":"L","Questions":[{"QuestionText":"Welches Grün?","DataField":"Art","Answers":["Mix"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Welche Farbe?","DataField":"Farbe","Answers":["rot","gold","silber","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Mit Kerze?","DataField":"Kerze","Answers":["ohne Kerze"]}]},{"Name":"Strauß","Code":"S","Questions":[{"QuestionText":"Welches Grün?","DataField":"Art","Answers":["Mix"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Welche Farbe?","DataField":"Farbe","Answers":["rot","gold","silber","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Mit Kerze?","DataField":"Kerze","Answers":["ohne Kerze"]}]},{"Name":"Tonschale","Code":"T","Questions":[{"QuestionText":"Welches Grün?","DataField":"Art","Answers":["Mix"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Welche Farbe?","DataField":"Farbe","Answers":["rot","gold","silber","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Mit Kerze?","DataField":"Kerze","Answers":["ohne Kerze","mit Kerze"]}]},{"Name":"Gefäßfüllung","Code":"G","Questions":[{"QuestionText":"Welches Grün?","DataField":"Art","Answers":["mit Grün","ohne Grün"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Welche Farbe?","DataField":"Farbe","Answers":["rot","gold","silber","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Mit Kerze?","DataField":"Kerze","Answers":["ohne Kerze","mit Kerze"]}]},{"Name":"Callunatopf","Code":"C","Questions":[{"QuestionText":"Welches Grün?","DataField":"Art","Answers":["Mix"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Welche Farbe?","DataField":"Farbe","Answers":["rot","gold","silber","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Mit Kerze?","DataField":"Kerze","Answers":["ohne Kerze","mit Kerze"]}]},{"Name":"Frischblumen","Code":"F","Questions":[{"QuestionText":"Welche Art?","DataField":"Art","Answers":["Strauß weihnachtlich","Strauß nicht weihnachtlich","Gesteck"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Welche Farbe?","DataField":"Farbe","Answers":["rot","gold","silber","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Mit Kerze?","DataField":"Kerze","Answers":["ohne Kerze","mit Kerze"]}]}]}]},
  {"Name":"Valentin","Code":"V","Questions":[{"Frage":"Welches Werkstück?","DataField":"Was","Answers":[{"Name":"Strauß","Code":"S","Questions":[{"QuestionText":"Welcher Art?","DataField":"Art","Answers":["rot","gemischt","Frühling"]}]},{"Name":"Herz","Code":"H","Questions":[{"QuestionText":"Welcher Art?","DataField":"Art","Answers":["rot","gemischt","Frühling"]}]},{"Name":"Gesteck","Code":"G","Questions":[{"QuestionText":"Welcher Art?","DataField":"Art","Answers":["rot","gemischt","Frühling"]}]},{"Name":"Topfpflanze","Code":"T","Questions":[{"QuestionText":"Welcher Art?","DataField":"Art","Answers":["Orchidee","Anderes"]}]}]}]},
  {"Name":"Muttertag","Code":"M","Questions":[{"Frage":"Welches Werkstück?","DataField":"Was","Answers":[{"Name":"Strauß","Code":"S","Questions":[{"QuestionText":"Welcher Art?","DataField":"Art","Answers":["rot","gemischt","Frühling"]}]},{"Name":"Herz","Code":"H","Questions":[{"QuestionText":"Welcher Art?","DataField":"Art","Answers":["rot","gemischt","Frühling"]}]},{"Name":"Gesteck","Code":"G","Questions":[{"QuestionText":"Welcher Art?","DataField":"Art","Answers":["rot","gemischt","Frühling"]}]},{"Name":"Topfpflanze","Code":"T","Questions":[{"QuestionText":"Welcher Art?","DataField":"Art","Answers":["Orchidee","Anderes"]}]}]}]},
  {"Name":"Allerheiligen","Code":"A","Questions":[{"Frage":"Welches Werkstück?","DataField":"Was","Answers":[{"Name":"Schale","Code":"S","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["10 cm","15 cm","20 cm","25 cm","30 cm","35 cm","40 cm","45 cm","50 cm","55 cm","60 cm","65 cm","70 cm","75 cm","80 cm"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Bukett","Code":"B","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Herz","Code":"H","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["10 cm","15 cm","20 cm","25 cm","30 cm","35 cm","40 cm","45 cm","50 cm","55 cm","60 cm","65 cm","70 cm","75 cm","80 cm"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"rundgesteckter Kranz","Code":"R","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["10 cm","15 cm","20 cm","25 cm","30 cm","35 cm","40 cm","45 cm","50 cm","55 cm","60 cm","65 cm","70 cm","75 cm","80 cm"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Kopfschmuckkranz","Code":"K","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["10 cm","15 cm","20 cm","25 cm","30 cm","35 cm","40 cm","45 cm","50 cm","55 cm","60 cm","65 cm","70 cm","75 cm","80 cm"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Kreuz","Code":"Z","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["10 cm","15 cm","20 cm","25 cm","30 cm","35 cm","40 cm","45 cm","50 cm","55 cm","60 cm","65 cm","70 cm","75 cm","80 cm"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Callunatopf","Code":"C","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Pflanzung","Code":"P","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["10 cm","15 cm","20 cm","25 cm","30 cm","35 cm","40 cm","45 cm","50 cm","55 cm","60 cm","65 cm","70 cm","75 cm","80 cm"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Strauß","Code":"S","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Gefäßfüllung","Code":"G","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Liegestrauß","Code":"L","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Form?","DataField":"Form","Answers":[[null,{"Name":"Island","Code":"I","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["10 cm","15 cm","20 cm","25 cm","30 cm","35 cm","40 cm","45 cm","50 cm","55 cm","60 cm","65 cm","70 cm","75 cm","80 cm"]},{"QuestionText":"Form?","DataField":"Form","Answers":["Raute","Kranz","Kreuz","Kissen"]}]}]]}]}]]}]}]]}]}]]}]}]]}]}]]}]}]]}]}]]}]}]]}]}]]}]}]]}]},{"Name":"Frischblumen","Code":"F","Questions":[{"QuestionText":"Welcher Farbe?","DataField":"Farbe","Answers":["Mix","rot","weiß","rosa","blau","violett","natur","grün","schwarz","orange","pink"]},{"QuestionText":"Welche Größe?","DataField":"Größe","Answers":["uni"]},{"QuestionText":"Form?","DataField":"Form","Answers":["Strauß","Gesteck"]}]}]}]}
];

const initialState = {
  rootAnswers: defaultRootAnswers,
  selectedIndex: 0,
};

// Reducers

const questionsReducer = createReducer({
  'set questions selectedIndex': (state, { selectedIndex }) => ({ 
    ...state,
    selectedIndex: state.rootAnswers[selectedIndex] ? selectedIndex : state.selectedIndex,
  }),
  'set questions rootAnswers': (state, { rootAnswers }) => ({
    rootAnswers: rootAnswers,
    selectedIndex: 0,
  }),
}, initialState);

export const reducers = { questions: questionsReducer };

// Actions

const setRootAnswers = (rootAnswers: Answer[]) => ({ type: 'set questions rootAnswers', rootAnswers });

const setSelectedIndex = (selectedIndex: number) => ({ type: 'set questions selectedIndex', selectedIndex });

export const actions = { setRootAnswers, setSelectedIndex };

// Selectors

const selectedIndex = (state): number => state.questions.selectedIndex;

const rootAnswers = (state): Answer[] => state.questions.rootAnswers;

const rootAnswer = (state): Answer => state.questions.rootAnswers[state.questions.selectedIndex];

export const selectors = { rootAnswers, rootAnswer, selectedIndex };

